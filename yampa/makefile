-include ../build.cfg

##----------------------------------------------------------------------------##
#   Project Settings                                                           #
##----------------------------------------------------------------------------##

NAME = KitchenTimer

##----------------------------------------------------------------------------##
#   Build Rules                                                                #
##----------------------------------------------------------------------------##

default: ${NAME}

run: ${NAME}
	./${NAME}

${NAME}: src/Main.hs src/Control.hs
	${STACK} build
	cp `stack path | grep local-install-root | sed 's/local-install-root: //'`/bin/${NAME} ${NAME}

src/Control.hs:
	$(MAKE) -C ..
	echo ""

##----------------------------------------------------------------------------##
#   Cleanup                                                                    #
##----------------------------------------------------------------------------##

clean:
	${STACK} clean
	rm -fR ${NAME}

##----------------------------------------------------------------------------##
#   Special Targets                                                            #
##----------------------------------------------------------------------------##

.PHONY: clean run
.SILENT:
